<controls:MaterialWindow 
    x:Class="PasswordManager.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="clr-namespace:PasswordManager.Controls"
    xmlns:local="clr-namespace:PasswordManager.Views"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:vm="clr-namespace:PasswordManager.ViewModels"
    mc:Ignorable="d"
    d:DataContext="{x:Static vm:MainWindowViewModel.DesignTimeInstance}"
    Title="MainWindow"
    Height="450" Width="800"
    Closed="Window_Closed">
    <Window.Resources>
        <DataTemplate 
            x:Key="FolderListBoxItem" 
            DataType="{x:Type vm:FolderItemViewModel}">
            <Grid
                Width="60"
                Height="60">
                <md:PackIcon
                    VerticalAlignment="Top"
                    HorizontalAlignment="Center"
                    Kind="{Binding IconKind}"
                    Width="24"
                    Height="24"
                    Margin="0 8 0 0">
                </md:PackIcon>
                <TextBlock
                    VerticalAlignment="Bottom"
                    HorizontalAlignment="Center"
                    Text="{Binding Name}"
                    Margin="0 4"
                    MaxWidth="70"
                    TextWrapping="Wrap" />
            </Grid>
        </DataTemplate>
        <Style
            x:Key="LeftToolbarMaterialButton"
            TargetType="{x:Type ButtonBase}"
            BasedOn="{StaticResource MaterialDesignFlatButton}">
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Width" Value="60"/>
            <Setter Property="Height" Value="60"/>
            <Setter Property="FontWeight" Value="Regular"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}"/>
            <Setter Property="md:ButtonAssist.CornerRadius" Value="0"/>
            <Setter Property="Opacity" Value="0.63"/>
        </Style>
        <Style
            x:Key="FolderListBoxItemStyle"
            TargetType="{x:Type ListBoxItem}"
            BasedOn="{StaticResource MaterialDesignToolToggleListBoxItem}">
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style
            x:Key="CredentialsListBoxItemStyle"
            TargetType="{x:Type ListBoxItem}"
            BasedOn="{StaticResource MaterialDesignListBoxItem}">
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <DataTemplate
            x:Key="CredentialListBoxItem"
            DataType="{x:Type vm:CredentialViewModel}">
            <Grid>
                <TextBlock 
                    Text="{Binding Name}"/>
            </Grid>
        </DataTemplate>
    </Window.Resources>
    <md:DialogHost
        Identifier="MainWindowDialogHost">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <StackPanel>
                <ListBox
                    SelectedItem="{Binding SelectedFolder, UpdateSourceTrigger=PropertyChanged}"
                    ItemsSource="{Binding Folders}"
                    ItemTemplate="{StaticResource FolderListBoxItem}"
                    Style="{StaticResource MaterialDesignListBox}"
                    ItemContainerStyle="{StaticResource FolderListBoxItemStyle}"
                    ScrollViewer.CanContentScroll="False"
                    md:ShadowAssist.ShadowDepth="Depth0"
                    md:ListBoxAssist.IsToggle="False">
                    <ListBox.Resources>
                        <Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource MaterialDesignScrollBarMinimal}"/>
                    </ListBox.Resources>
                </ListBox>
                <Button
                    Style="{StaticResource LeftToolbarMaterialButton}"
                    ContentTemplate="{StaticResource FolderListBoxItem}"
                    Content="{Binding SettingsFolder}" />
            </StackPanel>
            <Grid
                Grid.Column="1">
                <ListBox
                    SelectedItem="{Binding SelectedCredential, UpdateSourceTrigger=PropertyChanged}"
                    ItemsSource="{Binding Credentials}"
                    ItemTemplate="{StaticResource CredentialListBoxItem}"
                    ItemContainerStyle="{StaticResource CredentialsListBoxItemStyle}"/>
            </Grid>
        </Grid>
    </md:DialogHost>
</controls:MaterialWindow>
