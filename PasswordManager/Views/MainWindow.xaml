<controls:MaterialWindow 
    x:Class="PasswordManager.Views.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="clr-namespace:PasswordManager.Controls"
    xmlns:local="clr-namespace:PasswordManager.Views"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:vm="clr-namespace:PasswordManager.ViewModels"
    mc:Ignorable="d"
    d:DataContext="{x:Static vm:MainWindowViewModel.DesignTimeInstance}"
    Title="Password manager"
    Height="500" 
    Width="800"
    MinWidth="400"
    MinHeight="300"
    Closed="Window_Closed">
    <Window.Resources>
        <DataTemplate 
            x:Key="FolderListBoxItem" 
            DataType="{x:Type vm:FolderItemViewModel}">
            <Grid
                Width="60"
                Height="60">
                <md:PackIcon
                    VerticalAlignment="Top"
                    HorizontalAlignment="Center"
                    Kind="{Binding IconKind}"
                    Width="24"
                    Height="24"
                    Margin="0 8 0 0">
                </md:PackIcon>
                <TextBlock
                    VerticalAlignment="Bottom"
                    HorizontalAlignment="Center"
                    Text="{Binding Name}"
                    Margin="0 4"
                    MaxWidth="70"
                    TextWrapping="Wrap" />
            </Grid>
        </DataTemplate>
        <Style
            x:Key="LeftToolbarMaterialButton"
            TargetType="{x:Type ButtonBase}"
            BasedOn="{StaticResource MaterialDesignFlatButton}">
            <Setter Property="Margin" Value="0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Width" Value="60"/>
            <Setter Property="Height" Value="60"/>
            <Setter Property="FontWeight" Value="Regular"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{DynamicResource MaterialDesignBody}"/>
            <Setter Property="md:ButtonAssist.CornerRadius" Value="0"/>
            <Setter Property="Opacity" Value="0.63"/>
        </Style>
        <Style
            x:Key="FolderListBoxItemStyle"
            TargetType="{x:Type ListBoxItem}"
            BasedOn="{StaticResource MaterialDesignToolToggleListBoxItem}">
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style
            x:Key="CredentialsListBoxItemStyle"
            TargetType="{x:Type ListBoxItem}"
            BasedOn="{StaticResource MaterialDesignListBoxItem}">
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="ContextMenu">
                <Setter.Value>
                    <ContextMenu>
                        <MenuItem 
                            Header="Edit"/>
                        <MenuItem 
                            Header="Remove"/>
                    </ContextMenu>
                </Setter.Value>
            </Setter>
        </Style>
        <DataTemplate
            x:Key="CredentialListBoxItem"
            DataType="{x:Type vm:CredentialViewModel}">
            <Grid>
                <TextBlock 
                    Text="{Binding Name}"
                    TextTrimming="CharacterEllipsis"/>
            </Grid>
        </DataTemplate>
    </Window.Resources>
    <md:DialogHost
        Identifier="MainWindowDialogHost">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition
                    Height="auto"/>
                <RowDefinition
                    Height="*" />
            </Grid.RowDefinitions>
            <md:ColorZone
                Mode="Standard"
                md:ShadowAssist.ShadowDepth="Depth2">
                <md:Transitioner
                    Grid.Row="0"
                    SelectedIndex="0">
                    <md:ColorZone
                        Mode="Standard">
                        <Grid>
                            <StackPanel
                                Orientation="Horizontal"
                                HorizontalAlignment="Right">
                                <Button
                                    Width="40"
                                    Height="40"
                                    Content="{md:PackIcon Kind=Magnify}"
                                    Style="{StaticResource MaterialDesignIconButton}"
                                    Margin="0 8" />
                                <Button
                                    Width="40"
                                    Height="40"
                                    Content="{md:PackIcon Kind=Settings}"
                                    Style="{StaticResource MaterialDesignIconButton}"
                                    Margin="4 8 8 8" />
                            </StackPanel>
                        </Grid>
                    </md:ColorZone>
                    <md:ColorZone
                        Mode="Standard">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition
                                    Width="auto" />
                                <ColumnDefinition
                                    Width="*" />
                            </Grid.ColumnDefinitions>
                            <Button
                                Margin="8"
                                Width="30"
                                Height="30"
                                Content="{md:PackIcon Kind=ChevronLeft}"
                                Style="{StaticResource MaterialDesignIconButton}" />
                            <TextBox
                                Grid.Column="1"
                                md:TextFieldAssist.HasClearButton="True"
                                md:HintAssist.Hint="Search"
                                VerticalAlignment="Center"
                                Margin="8 0 8 0" />
                        </Grid>
                    </md:ColorZone>
                </md:Transitioner>
            </md:ColorZone>
            <Grid
                Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition
                        Width="auto" />
                    <ColumnDefinition
                        Width="*"
                        MinWidth="160"/>
                    <ColumnDefinition
                        Width="auto" />
                    <ColumnDefinition
                        Width="*"
                        MinWidth="160"/>
                </Grid.ColumnDefinitions>
                <StackPanel>
                    <ListBox
                        SelectedItem="{Binding SelectedFolder, UpdateSourceTrigger=PropertyChanged}"
                        ItemsSource="{Binding Folders}"
                        ItemTemplate="{StaticResource FolderListBoxItem}"
                        Style="{StaticResource MaterialDesignListBox}"
                        ItemContainerStyle="{StaticResource FolderListBoxItemStyle}"
                        ScrollViewer.CanContentScroll="False"
                        SelectionMode="Single"
                        md:ShadowAssist.ShadowDepth="Depth0"
                        md:ListBoxAssist.IsToggle="False">
                        <ListBox.Resources>
                            <Style
                                TargetType="{x:Type ScrollBar}"
                                BasedOn="{StaticResource MaterialDesignScrollBarMinimal}" />
                        </ListBox.Resources>
                    </ListBox>
                    <Button
                        Style="{StaticResource LeftToolbarMaterialButton}"
                        ContentTemplate="{StaticResource FolderListBoxItem}"
                        Content="{Binding SettingsFolder}" />
                </StackPanel>
                <Grid
                    Grid.Column="1">
                    <ListBox
                        SelectedItem="{Binding SelectedCredential, UpdateSourceTrigger=PropertyChanged}"
                        ItemsSource="{Binding Credentials}"
                        ItemTemplate="{StaticResource CredentialListBoxItem}"
                        ItemContainerStyle="{StaticResource CredentialsListBoxItemStyle}" />
                    <Button 
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"
                        Margin="0 0 12 12"
                        Style="{StaticResource MaterialDesignFloatingActionMiniAccentButton}"
                        Content="{md:PackIcon Kind=Plus,Size=24}"/>
                </Grid>
                <GridSplitter
                    Grid.Column="2"
                    ResizeBehavior="PreviousAndNext"
                    Width="5" />
                <Grid
                    Grid.Column="3">
                    <StackPanel>
                        <TextBlock
                            Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                            Text="{Binding SelectedCredential.Name, FallbackValue='Please, select any credential'}"
                            Margin="8 8 0 0"
                            TextTrimming="CharacterEllipsis"/>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition
                                    Width="auto" />
                                <ColumnDefinition
                                    Width="*" />
                                <ColumnDefinition
                                    Width="auto" />
                            </Grid.ColumnDefinitions>
                            <md:PackIcon
                                Kind="Account"
                                Width="16"
                                Height="16"
                                Margin="8 0 0 0"
                                Foreground="{Binding BorderBrush, ElementName=LoginTextBox}"
                                VerticalAlignment="Center" />
                            <TextBox
                                x:Name="LoginTextBox"
                                IsReadOnly="True"
                                Grid.Column="1"
                                md:HintAssist.Hint="Login"
                                VerticalAlignment="Center"
                                Text="{Binding SelectedCredential.Login, Mode=OneWay}"
                                Style="{StaticResource MaterialDesignTextBox}"
                                Margin="8 0 0 0" />
                            <Button
                                Grid.Column="2"
                                Margin="8 0"
                                ToolTip="Copy login"
                                Style="{StaticResource MaterialDesignFlatButton}"
                                Content="{md:PackIcon Kind=ClipboardOutline}"/>
                        </Grid>
                        <Grid
                            Margin="0 4 0 0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition
                                    Width="auto" />
                                <ColumnDefinition
                                    Width="*" />
                                <ColumnDefinition
                                    Width="auto" />
                            </Grid.ColumnDefinitions>
                            <md:PackIcon
                                Kind="Key"
                                Width="16"
                                Height="16"
                                Margin="8 0 0 0"
                                Foreground="{Binding BorderBrush, ElementName=PasswordTextBox}"
                                VerticalAlignment="Center" />
                            <TextBox
                                x:Name="PasswordTextBox"
                                IsReadOnly="True"
                                Grid.Column="1"
                                md:HintAssist.Hint="Password"
                                VerticalAlignment="Center"
                                Text="{Binding SelectedCredential.Password, Mode=OneWay}"
                                Style="{StaticResource MaterialDesignTextBox}"
                                Margin="8 0 0 0" />
                            <Button
                                Grid.Column="2"
                                Margin="8 0"
                                ToolTip="Copy password"
                                Style="{StaticResource MaterialDesignFlatButton}"
                                Content="{md:PackIcon Kind=ClipboardOutline}" />
                        </Grid>
                        <Grid
                            MinHeight="32"
                            Margin="0 4 0 0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition
                                    Width="auto" />
                                <ColumnDefinition
                                    Width="*" />
                            </Grid.ColumnDefinitions>
                            <md:PackIcon
                                Kind="InformationOutline"
                                Width="16"
                                Height="16"
                                Margin="8 0 0 0"
                                Foreground="{Binding BorderBrush, ElementName=OtherTextBox}"
                                VerticalAlignment="Center" />
                            <TextBox
                                x:Name="OtherTextBox"
                                IsReadOnly="True"
                                AcceptsReturn="True"
                                Grid.Column="1"
                                md:HintAssist.Hint="Other"
                                VerticalAlignment="Center"
                                Text="{Binding SelectedCredential.Other, Mode=OneWay}"
                                Style="{StaticResource MaterialDesignTextBox}"
                                Margin="8 0 8 0" />
                        </Grid>
                    </StackPanel>
                </Grid>
            </Grid>
        </Grid>
    </md:DialogHost>
</controls:MaterialWindow>
